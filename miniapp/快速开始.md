# 🚀 快速开始 - 5步完成配置

## ✅ 第1步：开通云开发（5分钟）

1. 访问 https://mp.weixin.qq.com/ 登录小程序后台
2. 左侧菜单 → "云开发" → "开通"
3. 环境名称填：`tryon-prod`
4. 绑定支付方式（不会扣费，只是预授权）
5. **记录环境ID**（格式：`cloud1-xxx`）

> 💡 建议设置用量告警：设置 → 用量告警 → 设置为80%

---

## ✅ 第2步：修改环境ID（1分钟）

编辑文件：`miniapp/src/app.ts`

```typescript
Taro.cloud.init({
  env: 'cloud1-xxx', // 👈 改成你的环境ID
  traceUser: true
});
```

---

## ✅ 第3步：打开项目（1分钟）

1. 打开**微信开发者工具**
2. 导入项目 → 选择 `miniapp` 目录
3. AppID：使用你的小程序AppID（`wxcbba04be10210410`）

---

## ✅ 第4步：上传云函数（3分钟）

1. 在文件树中找到 `cloudfunctions` 文件夹
   - 如果看不到云函数图标，点击右上角"详情" → 本地设置 → 勾选"启用云函数"

2. 右键点击 `generateTryOn` 文件夹

3. 选择 **"上传并部署：云端安装依赖"** ⚠️ 必须选这个！

4. 等待上传完成（约1-2分钟）

---

## ✅ 第5步：配置环境变量（2分钟）

1. 点击开发者工具顶部 **"云开发"** 按钮

2. 左侧菜单 → "云函数" → 点击 `generateTryOn`

3. "函数配置" → "环境变量" → "编辑"

4. 添加这3个变量：

```
ARK_API_KEY = 3ecc5d48-8986-4027-a052-2f63010e2f3d
ARK_BASE_URL = https://ark.cn-beijing.volces.com/api/v3
ARK_MODEL = doubao-seedream-4-0-250828
```

5. 点击"保存"，然后 **"重启"** 云函数（重要！）

---

## 🎉 完成！开始测试

1. 在开发者工具中点击 **"编译"**

2. 控制台应该显示：`云开发初始化成功`

3. 测试流程：
   - 点击"选择您的照片" → 选择人物照片
   - 点击"选择服装图片" → 选择服装图片
   - 点击"生成试穿效果"
   - 等待30-120秒
   - 查看生成结果！

---

## 🔧 出问题了？

### 云函数调用失败？
→ 检查 `app.ts` 中的环境ID是否正确

### 提示"ARK_API_KEY未配置"？
→ 确认环境变量已保存，并且**重启了云函数**

### 生成超时？
→ 火山引擎API需要30-120秒，第一次较慢，耐心等待

### 查看详细日志
→ 云开发控制台 → 云函数 → generateTryOn → 日志

---

## 📚 更多帮助

详细配置文档：`cloudfunctions/配置步骤.md`

遇到问题？查看常见问题排查部分！
